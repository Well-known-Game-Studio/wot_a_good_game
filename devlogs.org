#+title:  Devlog
#+author: William Emfinger
#+date:   <2022-05-22 Sun>

* Task List
** Bugs

- [ ] Highlight post process volume doesn't respect bounds (for vegetation highlight)
- [ ] NPCs fall through the ground when starting the level with VoxelPlugin
- [ ] Niagara Water (3D) doesn't work
- [ ] VoxelPlugin 2.0 .vox importer is broken (UE 5.0.1)
- [ ] [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] waterfall clips at edge of cliff
- [ ] Arrows do not trigger overlaps with static meshes

** General

- [ ] [[https://courses.tomlooman.com/p/unrealengine-cpp?coupon_code=COMMUNITY15&_ga=2.38472932.678384283.1651337970-1623431491.1651337970][Tom Looman Professional Game Development in C++ and Unreal Engine]]
- [ ] watch UE learning course (C++, gameplay systems)
- [ ] prototype voxel destruction of world

** Systems to Learn

- [ ] [[id:2646bd9e-c7f4-4542-b702-f0a209fe7c60][Gameplay Abilities System]]
- [ ] Level Loading System
- [ ] State Saving / Loading System
- [ ] Entity spawning system (NPC, items, etc.)
- [ ] AI / [[id:0d87b52e-b537-4e31-9425-389518e8af59][Behavior Trees]] in UE
- [ ] [[id:7402039e-763b-4c5f-a1ab-a9e0609c61db][Blackboard]] - memory / storage of AI, no logic
- [ ] [[id:9bce7262-b02d-48e9-b133-a6fde84730cb][Environment Query System (EQS)]]

** Game

- [ ] Add effects (butterflies and dust motes) to the scene
- [ ] Start stubbing out dialogue system
- [ ] enemies drop items
- [ ] mushrooms increase health
- [ ] Add horse (skeletal mesh) model to game
- [ ] Have horse randomly wander around in the scene (in its pen)
- [ ] highlight interactable foliage
- [ ] add niagara water effects
- [ ] add niagara smoke effects (campfire / chimney)
- [ ] add lightning effect
- [ ] implement action system
- [ ] magic projectile destroys foliage instances
- [ ] magic projectile sets foliage instances on fire
- [ ] Add particle effects to waterfall (top & bottom)
- [ ] collectible arrow items
- [ ] arrow drops from enemies
- [ ] gamepad support (movement, camera rotation, attack, interact, projectile)
- [ ] mouse + keyboard support (to aim where mouse looks)
- [ ] Make blendspace 2d for holding bow, walking, idling
- [ ] Add UI for healing (health ui update)
- [ ] Add UI for picking up arrow (+1)

** Code

- [ ] Allow new character to climb ladder
- [ ] Create [[id:300caa98-236b-400d-9929-3d467ffc8b5c][Equippable Item]] interface
- [ ] Create weapon interface
- [ ] Create [[id:7d5a755b-0806-4982-8f7b-4655056c1108][Inventory]] system
- [ ] Migrate equippable code from BP to C++
- [ ] Migrate attack code from BP to C++

** Models

- [ ] Make ladder
- [ ] Make axe
- [ ] Animate medium scale models
- [ ] rig dog
- [ ] rig horse
- [ ] rig raccoon
- [ ] rig duck
- [ ] rig deer
- [ ] Animate sheep
- [ ] Animate horse
- [ ] animate raccoon
- [ ] animate duck
- [ ] Health item (food, potion, etc.)
- [ ] Armor item (helmet?)
- [ ] Barrel
- [ ] Winespring Inn
- [ ] Rand house interior
- [ ] Perrin's Forge
- [ ] Pig
- [ ] Crops (corn, wheat, pumpkins)
- [ ] Fruit (apples, bananas, oranges, pears)
- [ ] Fade / Myrdraal enemy model
- [ ] Update flat models to have a more clearly defined front

** Audio

- [ ] Death (voxel explode)
- [ ] Sheep
- [ ] Walking
- [ ] Melee Swing
- [ ] Melee Hit
- [ ] Forage
- [ ] Door
- [ ] Chest
- [ ] Item Drop (player)
- [ ] Item Drop (NPC)

* Week of 2022-05-29

- [X] Set up behavior tree to move to goal then wait
- [X] Set up MinionRanged (BP) class to use behavior tree
- [X] Add behavior tree service (C++) to check attack range and line of sight
- [X] bow+arrow system in game - quiver, pull back, reload, recover arrows, etc
- [X] Arrows trigger overlaps with foliage
- [X] Arrows trigger overlaps with VoxelWorld
- [X] Arrows properly stick into enemies and objects
- [X] Arrows damage NPCs
- [X] Arrows are destroyed if attached actor is destroyed
- [X] WIP bow animation, can fire wile standing
- [X] Update player interaction to have Primary Attack and Secondary Attack
- [X] Update weapon base to support specific primary attack and secondary attack actions
- [X] Make bow holding pose (unreal engine)
- [X] Add bow holding animation / pose and apply it in the anim BP / graph
- [X] Move player camera farther out for better view
- [X] Update the magic projectile effects
- [X] Add arrow flying & impact sound effects
- [X] Arrow shoot audio
- [X] Arrow Impact audio
- [X] Magic Shoot audio
- [X] Magic Hit audio
- [X] Update arrow to play sound effects
- [X] Add magic projectile sound effects
- [X] Add attribute component to MinionRangedBP
- [X] Add kill, particles, and ui to MinionRangedBP
- [X] Enable CPU access for particle effect for TrollocBoar model
- [X] Ensure magic projectile shot by MinionRangedBP doesn't interact with that minonrangedBP.

* Week of 2022-05-22

- [X] Re-export Lan models to have textures
- [X] Rig medium and small scale lan models
- [X] Re-rig / update large lan model
- [X] Update magic projectile to have a radial force component to apply when it explodes
- [X] magic projectile destroys voxel world
- [X] added sound to projectile base class
- [X] Moved impact logic for projectile from BP into C++
- [X] Added damage popup with animation that is triggered by new attribute / health system
- [X] have hit flash colored - where the color lerps depending on current health
- [X] Have hit flash work for player character
- [X] Add stun attribute and logic to UWotAttribute (C++) class
- [X] Add OnKilled event to UWotAttribute (C++) class
- [X] Migrate killed event from HealthComponent (BP) to AttributeComponent (C++) in NPC and player character
- [X] Only show damage popup if owner is still around (error output when character is killed)
- [X] Updated projectile base class to properly have both effect and impact sound
- [X] Set effect/impact sounds for magic projectile
- [X] add health potion model
- [X] add crate model
- [X] add health potion mesh to UE4
- [X] Create health potion class (C++) with cooldown of 10s (hide/disable collision)
- [X] start developing behavior tree AI system
- [X] Rig medium-flat trolloc_boar model
- [X] Add MinionRanged (BP) class, using medium-flat trolloc_boar

* Week of 2022-05-15

- [X] [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] water has to spawn late because of VoxelPlugin
- [X] [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] water simulation starts from scratch at level load
- [X] [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] some areas of the map flood (out of river)
- [X] Update magic projectile to not have gravity
- [X] Magic projectile now ignores player (instigator) and explodes on cotact (FX + destroy)
- [X] Update third person character to use newest Lan model (large scale)
- [X] Update animation blueprint template to expose animation sequences and blendspaces
- [X] Use animation blueprint template with new (large scale) Lan model
- [X] Make door functional (animate / interact) on house
- [X] Add pen door model (for sheep / horse pen)
- [X] Make pen doors interactable
- [X] Update NPC / Enemy to use the same base (so that they can be killed and have the death animation)
- [X] magic projectile kills enemies
- [X] magic projectile kills sheep
- [X] Update player template animation to support attack and properly notify / trigger state exits
- [X] Update player bluprint to handle events for attacking / stopping
- [X] Update niagara kill effect / material to allow it to be set when spawned for better control
- [X] Updated NPC base to create material instance & set the texture parameter appropriately
- [X] Update sheep blender file to bake materials to unwrapped UV texture file
- [X] The secret passage stairs don't fit the current 3rd Person Blueprint
- [X] Update magic projectile to use niagara instead of Cascade (legacy)
- [X] [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] some areas of the map have water when they shouldn't (e.g. water coming from rocks)
- [X] rig medium scale rand model
- [X] rig medium scale flat rand model
- [X] add medium scale rand model to game
- [X] add medium scale flat rand model to game
- [X] add small scale rand model to game
- [X] bow weapon in game
- [X] Add hit flash to enemies when they are hit
- [X] Update Lan V1 to use instance of textured_voxel_subsurface_material
- [X] Update Trolloc to use instance of textured_voxel_subsurface_material

* Week of 2022-05-08

- [X] Test VoxelPlugin 2.0 - unfortunately .vox importer is broken :(
- [X] Work with [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] plugin for water in diorama scene
- [X] Integrate [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] into the project
- [X] Add [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] to diorama test scene for pond
- [X] Add [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] to diorama test scene for waterfall
- [X] bugfix: The water (river / waterfalls / lakes) doesn't look very good :( - use [[id:f0d71869-42f9-43fd-a95a-76f2eb7300cb][Fluid Flux]] (above)
- [X] tutorial: Make new character class (C++)
- [X] tutorial: Make magic projectile class (C++)
- [X] tutorial: Make interactible interface (C++)
- [X] tutorial: Make item chest base class (C++)
- [X] tutorial: make chest interact-able
- [X] Make chest animation / open model
- [X] Reparent ThirdPersonCharacter to WotCharacter
- [X] Create magic projectile BP class from WotMagicProjectile (C++)
- [X] Update spawning of projectile from player to use actor rotation (better for fixed camera)

* Week of 2022-04-24

- [X] Update character movement (normalize vector and increase speed)

* Week of 2022-04-17

- [X] Add Tam Model
- [X] Worked on highlighting interactable foliage
- [X] Separated chest model into top and base
- [X] Add medium scale sword model

* Week of 2022-04-10

- [X] Work on game design document to detail out some of the systems
- [X] Update voxelpro plugin to latest version of ProBetaLTS for UE5 Release
- [X] Add mountain goat model
- [X] Add fox model
- [X] bow model
- [X] arrow model

* Week of 2022-04-03

- [X] Break apart voxel scene into different models
- [X] Load separated models into world
- [X] Load in animals (skeletal meshes) as separate models into the world
- [X] Add navmesh into scene and test with old enemy classes
- [X] Use foliage system for trees, bushes, grass, mushrooms
- [X] Stub out forage-able foliage system
- [X] Add interaction UI (text)
- [X] Allow player to remove specific kinds of foliage from environment (mushrooms)
- [X] Make base NPC blueprint
- [X] Have sheep randomly move around in the scene (in their pen)
- [X] Rig animal(s)
- [X] Add devlogs to repo

* Week of 2022-03-27

- [X] more models in the world
- [X] Design a new trolloc model (wolf)
- [X] Design a new trolloc model (boar)
- [X] Get world into UE5
- [X] Update 3rd person camera config (angle, depth-of-field)
- [X] Add water (pond) to the scene
- [X] Add water (river) to the scene
- [X] Add water (waterfalls) to the scene
- [X] Fix hidden tunnel in diorama
- [X] Add little eyes to each of the character models
- [X] Start using GLTF export from voxelmax
- [X] Separate water from land in dorama scene

* Week of 2022-03-20

- [X] Make new trolloc model (humanoid)
- [X] Load voxel scene into UE5
- [X] more tree models
- [X] bush models
- [X] mushroom models
- [X] sheep model
- [X] horse model
- [X] duck model
- [X] bird model
- [X] campfire model
- [X] fence model
- [X] house model
- [X] dog model
- [X] deer model
- [X] raccoon model
- [X] chest model
